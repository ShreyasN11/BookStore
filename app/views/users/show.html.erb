<div class="max-w-4xl mx-auto px-4 py-12">
  
  <!-- Profile Header Card -->
  <div class="bg-white border border-stone-200 rounded-3xl p-8 mb-8 shadow-sm">
    <div class="flex flex-col md:flex-row items-center gap-8">
      
      <!-- Avatar Placeholder -->
      <div class="h-24 w-24 bg-indigo-100 rounded-full flex items-center justify-center text-indigo-600 ring-4 ring-indigo-50">
        <span class="text-3xl font-serif font-bold">
          <%= @user.email[0].upcase %>
        </span>
      </div>

      <div class="flex-1 text-center md:text-left">
        <h1 class="text-3xl font-serif font-medium text-stone-900 mb-1">
          <%= @user.email.split('@').first.capitalize %>
        </h1>
        <p class="text-stone-500 mb-4 tracking-wide"><%= @user.email %></p>
        
        <div class="flex flex-wrap justify-center md:justify-start gap-3">
          <% if current_user == @user %>
            <%= link_to edit_user_path(@user), class: "px-5 py-2 bg-stone-900 text-white rounded-xl text-sm font-medium hover:bg-stone-800 transition shadow-sm" do %>
              Edit Profile
            <% end %>
          <% end %>
          <span class="px-5 py-2 bg-stone-100 text-stone-600 rounded-xl text-sm font-medium">
            Member since <%= @user.created_at.strftime("%B %Y") %>
          </span>
        </div>
      </div>

      <!-- Quick Stats -->
      <div class="flex gap-8 border-l border-stone-100 pl-8 hidden md:flex">
        <div class="text-center">
          <p class="text-2xl font-bold text-stone-900">0</p>
          <p class="text-xs uppercase tracking-widest text-stone-400 font-bold">Books</p>
        </div>
        <div class="text-center">
          <p class="text-2xl font-bold text-stone-900">0</p>
          <p class="text-xs uppercase tracking-widest text-stone-400 font-bold">Reviews</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Content Area -->
  <div class="md:col-span-2 space-y-6">
    <div class="bg-white border border-stone-200 rounded-3xl shadow-sm overflow-hidden">
      <!-- Table Header -->
      <div class="px-6 py-5 border-b border-stone-100 flex justify-between items-center">
        <h3 class="font-serif text-xl text-stone-900">Order History</h3>
        
      </div>

      <div class="overflow-x-auto">
        <table class="w-full text-left border-collapse">
          <thead>
            <tr class="bg-stone-50/50">
              <th class="px-6 py-4 text-[11px] font-bold text-stone-400 uppercase tracking-tight">Order #</th>
              <th class="px-6 py-4 text-[11px] font-bold text-stone-400 uppercase tracking-tight">Status</th>
              <th class="px-6 py-4 text-[11px] font-bold text-stone-400 uppercase tracking-tight">Date</th>
              <th class="px-6 py-4 text-[11px] font-bold text-stone-400 uppercase tracking-tight">Price</th>
              <th class="px-6 py-4 text-[11px] font-bold text-stone-400 uppercase tracking-tight"></th>
            </tr>
          </thead>

          <tbody class="divide-y divide-stone-100">
          <% if @user.orders.any? %>
              <% @user.orders.each do |order| %>
                <tr class="group hover:bg-stone-50/30 transition-colors">
                  <td class="px-6 py-4 text-sm font-medium text-stone-900">
                    #ORD-<%= order.id.to_s.rjust(5, '0') %>
                  </td>
                  <td class="px-6 py-4">
                    <%# Logic for status colors %>
                    <% status_classes = case order.status 
                      when 'completed' then 'bg-emerald-50 text-emerald-700 border-emerald-100'
                      when 'pending' then 'bg-amber-50 text-amber-700 border-amber-100'
                      else 'bg-stone-100 text-stone-600 border-stone-200'
                      end %>
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border <%= status_classes %>">
                      <%= order.status.capitalize %>
                    </span>
                  </td>
                  <td class="px-6 py-4 text-sm text-stone-500">
                    <%= order.created_at.strftime("%b %d, %Y") %>
                  </td>
                  <td class="px-6 py-4 text-sm font-semibold text-stone-900">
                    $<%= number_with_precision(order.total_price, precision: 2) %>
                  </td>
                  <td class="px-6 py-4 text-right">
                    <%= link_to order_path(order), class: "text-indigo-600 hover:text-indigo-900 text-sm font-medium inline-flex items-center gap-1 group-hover:translate-x-1 transition-transform" do %>
                      View <span class="hidden sm:inline">Order</span> â†’
                    <% end %>
                  </td>
                </tr>
              <% end %>
            <% else %>
              <tr>
                <td colspan="5" class="px-6 py-12 text-center text-stone-400 italic text-sm">
                  No orders found in your history.
                </td>
              </tr>
            <% end %>
          </tbody>

        </table>
      </div>

      <!-- Table Footer / CSV Action -->
      <div class="px-6 py-4 bg-stone-50/50 border-t border-stone-100 flex justify-center sm:justify-end">
        <%= link_to user_path(@user, format: :csv), class: "inline-flex items-center gap-2 px-4 py-2 bg-white border border-stone-200 rounded-xl text-xs font-bold text-stone-600 uppercase tracking-wide hover:bg-stone-50 hover:border-stone-300 transition-all shadow-sm" do %>
          Download CSV
        <% end %>
      </div>
    </div>
  </div>


  </div>
</div>
