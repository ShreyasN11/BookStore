<div class="max-w-6xl mx-auto px-4 py-12">
  <div class="flex justify-between items-center mb-8">
    <h1 class="text-3xl font-serif font-medium text-stone-900">Manage Catalog</h1>
    <div class="flex flex-wrap gap-2">
      <%= link_to stockmanager_books_path(format: :csv), 
          class: "inline-flex items-center gap-2 bg-white border border-stone-200 text-stone-600 px-5 py-3 rounded-xl font-bold hover:bg-stone-50 transition-all shadow-sm" do %>
        Export CSV
      <% end %>
      <%= link_to "Add New Book", new_stockmanager_book_path, class: "bg-indigo-600 text-white px-5 py-3 rounded-xl font-bold hover:bg-indigo-700 transition" %>
    </div>  
  </div>

  <div class="p-6 bg-stone-50 border border-stone-200 rounded-[2rem] mb-8 transition-all hover:border-stone-300">
    <div class="flex flex-col md:flex-row items-center justify-between gap-6">
      
      <div class="flex items-center gap-4">
          <h3 class="text-sm font-bold text-stone-900 uppercase tracking-widest">Upload a CSV to add or update books</h3>
      </div>

      <%= form_with url: import_stockmanager_books_path, method: :post, multipart: true, class: "w-full md:w-auto" do |f| %>
        <div class="flex items-center bg-white p-2 border border-stone-200 rounded-2xl shadow-sm">
          <%= f.file_field :file, 
              accept: 'text/csv', 
              class: "block w-full text-xs text-stone-500
                      file:mr-4 file:py-2 file:px-4
                      file:rounded-xl file:border-0
                      file:text-xs file:font-bold
                      file:bg-indigo-50 file:text-indigo-700
                      hover:file:bg-indigo-100 cursor-pointer transition-all" %>
          
          <%= f.submit "Upload Data", 
              class: "bg-stone-900 text-white px-6 py-2 rounded-xl text-xs font-bold hover:bg-stone-800 cursor-pointer transition-all active:scale-95 shadow-md shadow-stone-200" %>
        </div>
      <% end %>

    </div>
  </div>

  <div class="bg-white border border-stone-200 rounded-3xl shadow-sm overflow-hidden">
    <table class="w-full text-left">
      <thead class="bg-stone-50 border-b border-stone-100">
        <tr>
          <th class="px-6 py-4 text-xs font-bold text-stone-400 uppercase tracking-widest">Book</th>
          <th class="px-6 py-4 text-xs font-bold text-stone-400 uppercase tracking-widest">Quantity</th>
          <th class="px-6 py-4 text-xs font-bold text-stone-400 uppercase tracking-widest">Images</th>
          <th class="px-6 py-4 text-xs font-bold text-stone-400 uppercase tracking-widest">Price</th>
          <th class="px-6 py-4 text-xs font-bold text-stone-400 uppercase tracking-widest text-right">Actions</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-stone-100">
        <% @books.each do |book| %>
          <tr>
            <td class="px-6 py-4">
              <p class="font-bold text-stone-900"><%= book.title %></p>
              <p class="text-xs text-stone-500 italic"><%= book.author %></p>
            </td>
            <td class="px-6 py-4 text-stone-700 text-sm"><%= book.quantity %></td>
            <td class="px-6 py-4 text-stone-500 text-sm">
              <%= book.images.count %> files
            </td>
            <td class="px-6 py-4 font-medium text-stone-900">Rs. <%= book.price %></td>
            <td class="px-6 py-4 text-right space-x-3">
              <%= link_to "Edit", edit_stockmanager_book_path(book), class: "text-indigo-600 hover:underline text-sm font-bold" %>
              <%= link_to "Delete", stockmanager_book_path(book), data: { turbo_method: :delete, turbo_confirm: "Are you sure?" }, class: "text-red-400 hover:text-red-600 text-sm font-bold" %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>